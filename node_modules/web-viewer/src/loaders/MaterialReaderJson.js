/**
 * @author muwj 2018/07/25
 */

CLOUD.Loader.MaterialReaderJson = function( text ) {

    this.count = 0;
    this.Data = JSON.parse( text );

    if( this.Data.hasOwnProperty( "materials" ) ) {
        this.materials = this.Data["materials"];
    }

    if( this.Data.hasOwnProperty( "metadata" ) ) {
        this.metadata = this.Data["metadata"];

        if( this.metadata.hasOwnProperty( "count" ) ) {
            this.count = this.metadata["count"];
        }
    }
    if( this.count === 0 ) {

        for( var key in this.materials ) {
            if( this.materials.hasOwnProperty( key ) ) {
                this.count++;
            }
        }
    }

    this.getCount = function () {

        return this.count;
    };

    this.getMaterial = function ( id ) {

        if( id >= 0 && id < this.count ) {

            return this.materials[id + ''];
        }
        return undefined;
    }
};